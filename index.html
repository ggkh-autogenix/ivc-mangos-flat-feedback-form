<!DOCTYPE html>
<html>
<head>
  <title>Flat Feedback Form</title>
  <style>
    body { font-family: Arial; padding: 20px; max-width: 500px; margin: auto; }
    input, textarea, button { display: block; width: 100%; margin: 10px 0; padding: 10px; }
    #status { color: green; font-weight: bold; }
  </style>
</head>
<body>
  <h2>Submit Feedback</h2>
  <input type="text" id="block" placeholder="Block" required />
  <input type="text" id="flat" placeholder="Flat Number" required />
  <textarea id="feedback" placeholder="Your Feedback" required></textarea>
  <button onclick="submitFeedback()">Submit</button>
  <p id="status"></p>

  <script>
    const SUPABASE_URL = "https://mqslfvseexirbrsxpuws.supabase.co";
    const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1xc2xmdnNlZXhpcmJyc3hwdXdzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA3NDI4OTEsImV4cCI6MjA2NjMxODg5MX0.bSPcphsl_YOtv3_z07AjU-3BX6wiueW5_xan5KR2f-U";

    async function submitFeedback() {
      const block = document.getElementById("block").value;
      const flat = document.getElementById("flat").value;
      const feedback = document.getElementById("feedback").value;

      const response = await fetch(`${SUPABASE_URL}/rest/v1/feedback`, {
        method: "POST",
        headers: {
          "apikey": SUPABASE_ANON_KEY,
          "Authorization": `Bearer ${SUPABASE_ANON_KEY}`,
          "Content-Type": "application/json",
          "Prefer": "return=minimal"
        },
        body: JSON.stringify({ block, flat, feedback })
      });

      if (response.ok) {
        document.getElementById("status").innerText = "✅ Feedback submitted!";
        document.getElementById("block").value = "";
        document.getElementById("flat").value = "";
        document.getElementById("feedback").value = "";
      } else {
        document.getElementById("status").innerText = "❌ Error submitting feedback.";
      }
    }
  </script>
</body>
</html>
